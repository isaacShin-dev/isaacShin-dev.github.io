import{g as b,r as u,h as j,i as A,j as G,u as P,k as J,l as K,m as O,n as x,q as o,s as Q,o as c,v as _,w as s,b as n,c as w,x as $,F as k,y as W,z as X,d as g,t as v,a as Y,_ as Z}from"./entry.850211dc.js";const ee={class:"viewcount--small"},C="https://eclipseaddict.com/v1/",te=b({__name:"Blog",setup(ae){const d=u([]),r=u(1),f=u(0),p=u(!1),B=j(),i=A();G();const V=i.query.tag;P({meta:[]});const q=async()=>{const l=i.query.tag,t=l?`&tag=${l}`:"";x({url:`${C}list/?page=${r.value}${t}`,method:"GET"}).then(a=>{d.value=a.data.results,f.value=Math.ceil(a.data.count/8)}).catch(a=>{console.log(a)})},z=(l,t,a,m)=>{B.push({path:"/Detail",query:{id:l,title:t,description:a,cover:m}})};return J(async()=>{console.log("mounted",{}.VITE_API_URL),await q()}),K(()=>{i.query.tag!=V&&window.location.reload()}),O(r,async()=>{const l=i.query.tag,t=l?`&tag=${l}`:"";try{const a=await x.get(`${C}list/?page=${r.value}${t}`);d.value=a.data.results}catch(a){console.error(a)}}),(l,t)=>{const a=o("v-img"),m=o("v-card-title"),D=o("v-spacer"),M=o("v-icon"),y=o("v-card-subtitle"),T=o("v-chip"),E=o("v-chip-group"),I=o("v-card"),N=o("v-col"),R=o("v-row"),U=o("v-pagination"),F=o("v-container"),H=Q("ripple");return c(),_(F,{fluid:"",class:"container--bottom"},{default:s(()=>[n(R,{dense:""},{default:s(()=>[(c(!0),w(k,null,$(d.value,(e,L)=>(c(),_(N,{key:L,sm:"6",md:"4",lg:"3",xl:"2",xxl:"3"},{default:s(()=>[X((c(),_(I,{class:"mx-auto article--card","max-width":"344",elevation:"3",onClick:h=>z(e.id,e.title,e.title,e.cover)},{default:s(()=>[n(a,{src:e.cover,"lazy-src":"/loading.gif",height:"200px",cover:""},null,8,["src"]),n(m,{class:"cardTitle"},{default:s(()=>[g(v(e.title),1)]),_:2},1024),n(y,null,{default:s(()=>[g(v(e.created_time.substring(0,10))+" ",1),n(D),n(M,{icon:"mdi-eye",size:"x-small"}),Y("span",ee,v(e.views),1)]),_:2},1024),n(y,null,{default:s(()=>[n(E,null,{default:s(()=>[(c(!0),w(k,null,$(e.categories_data,(h,S)=>(c(),_(T,{size:"small",class:"mx-1",dark:"",key:S},{default:s(()=>[g(v(h.category),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[H]])]),_:2},1024))),128))]),_:1}),n(U,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),length:f.value,"total-visible":5,color:"grey-darken-1",variant:"elevated",class:W(["paginator",{"paginator--hover":p.value}]),onMouseover:t[1]||(t[1]=e=>p.value=!0),onMouseleave:t[2]||(t[2]=e=>p.value=!1),style:{}},null,8,["modelValue","length","class"])]),_:1})}}});const se=Z(te,[["__scopeId","data-v-326912db"]]);export{se as default};
